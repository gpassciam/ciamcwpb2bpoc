<!DOCTYPE html>
<html lang="en">
<!-- Basic -->
<head>
    <!--<link href="assets/css/style-order-return.css" rel="stylesheet">-->
    <link href="assets/css/style.css" rel="stylesheet">
    <script src="assets/js/Gigya.js"></script>
    <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/js/IndexedDB.js"></script>

</head>
<body>



    <script type="text/javascript">


        function services(flag) {

            if (flag == "Ordering") {


                //alert("your Ordering site will be open in new tab");
                window.open("Ordering.html", "_blank");
            }

            if (flag == "Return") {


                window.open("Returns.html", "_blank");
            }
            if (flag == "Delegated Admin") {

                //alert("you" + sessionStorage.getItem('OrgID'));
                opendelegateadmin(sessionStorage.getItem('OrgID'));
                

            }
        }

        //var session_UID = CheckLogin();
        const queryString = window.location.search;
        //console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        //alert(urlParams.get('UID'));
        var session_UID = urlParams.get('UID');
        //alert(session_UID);
        if (session_UID == null || typeof session_UID == "undefined") {
            flag = 0;
            alert('Please Login to Proceed');
            window.open("https://435621550915.us1.my.gigya-ext.com/pages/test", "_self");

        }
        else {

            var DBName = "Users";
            var Table = "Users_Info";

            var mytable = "<table width=\"100%\"><tbody><tr><td><div id=\"header\"></div></td></tr><tr><td><section id=\"ord-ret-hero\">" +

                "<div class=\"container\">" +
                "<div class=\"col-lg-7 order-2 order-lg-1 d-flex align-items-center\">" +
                "<div data-aos=\"zoom-out\" class=\"aos-init aos-animate\">" +
                //"<h1>Empower your organization with CIAM POC </h1></div></div></div></section ></td></tr><tr><td>";
                "<h1 style=\"font-family:arial\">Welcome to B2B Portal </h1></div></div></div></section ></td></tr><tr><td>";

            mytable +=
                "<section id=\"services\" class=\"services\"><div class=\"container\"><div class=\"section-title\"><h2 id=\"dname\"></h2></div><div align=\"center\">"

            //mytable +=
            //    "<section id=\"services\" class=\"services\"><div class=\"container\"><div class=\"section-title\"><h2 id=\"dname\"></h2><p style=\"text-colour:white\">You are in B2B Portal.<br/>Below are the list of applications which you have access.</p></div><div class=\"row\">"

            mytable += "<table><tr>";
            //const roleids = sessionStorage.getItem("roles");
            setroles();
            var roleids = "";
            getUID(DBName, Table, session_UID).then(function (SUID) {

                roleids = sessionStorage.getItem("roles");
                
            });
                
                //const roleids = "9396cbdd-320f-4a6f-ab3d-7db4fbedda6a,7853dce4-23ae-4cca-9691-2859300eac76,98e288cc-63ed-44bc-adc9-88acee3d1224";
                roleids.split(",").forEach(function (roleid) {
                    role = localStorage.getItem(roleid);
                    alert(role);
                    //if (role == "Delegated Admin") {

                    //    //opendelegateadmin(sessionStorage.getItem('OrgID'));
                    //}
                    /*else {*/
                    if (role == "Delegated Admin") {

                        mytable += "<td>&nbsp;</td><td onclick=\"services('" + role + "')\"><div><div class=\"icon-box\"><div class=\"icon\"><i class=\"fas fa-heartbeat\"></i></div><h4>" + role + "</h4><p id=\"da\">Use delegated administration to assign limited admin privileges to users in your org who aren’t administrators</p></div></div></td>"

                    }
                    if (role == "Ordering") {

                        mytable += "<td>&nbsp;</td><td onclick=\"services('" + role + "')\"><div><div class=\"icon-box\"><div class=\"icon\"><i class=\"fas fa-heartbeat\"></i></div><h4>" + role + "</h4><p id=\"da\">Improve wholesale medical equipment ordering efficiency with Roche web-based application</p></div></div></td>"

                    }
                    if (role == "Return") {
                        mytable += "<td>&nbsp;</td><td onclick=\"services('" + role + "')\"><div><div class=\"icon-box\"><div class=\"icon\"><i class=\"fas fa-heartbeat\"></i></div><h4>" + role + "</h4><p id=\"da\">Improve wholesale medical equipment returns efficiency with Roche web-based application</p></div></div></td>"

                    }
                    /*}*/

                })


                mytable += "</tr></table></div></div></section ></td></tr><tr><td>"
                mytable +=
                    "<hr style=\"height: 50pt;visibility: hidden\" /><div id=\"footer\"></div>" +
                    "</td></tr ></tbody ></table >";


                console.log(mytable);

           

        }

    </script>


    <script src="assets/js/jquery.min.js"></script>
    
    <script src="https://cdns.gigya.com/js/gigya.js?apikey=4_AV5pqQcLCM0a9C53WPjvbA"></script>





</body>
</html>
